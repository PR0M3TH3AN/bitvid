# Load Test Run 2026-02-13

## Run 1: Auto-start Local Relay
**Command:** `CLIENTS=10 DURATION_SEC=5 node scripts/agent/load-test.mjs`

**Output:**
```json
{
  "config": {
    "relay": "ws://localhost:8888",
    "clients": 10,
    "duration": 5,
    "rate": 10,
    "mix": 0.5,
    "dryRun": false
  },
  "summary": {
    "totalSent": 49,
    "totalAccepted": 49,
    "totalRejected": 0,
    "totalErrors": 0,
    "throughput": 5.3663344650093086,
    "latency": {
      "avg": 0.88,
      "p50": 1,
      "p95": 2,
      "p99": 4
    }
  },
  "timestamp": "2026-02-13T18:37:39.822Z"
}
```

## Run 2: Safety Check
**Command:** `RELAY_URL=wss://relay.damus.io CLIENTS=1 DURATION_SEC=1 node scripts/agent/load-test.mjs`

**Output:**
```
SAFETY BLOCK: The target relay (wss://relay.damus.io) appears to be public.
Load testing against public relays is strictly forbidden without explicit overrides.
To force this run, set FORCE_UNSAFE=1 (use with extreme caution).
```

## Run 3: Dry Run
**Command:** `DRY_RUN=1 DURATION_SEC=1 node scripts/agent/load-test.mjs`

**Output:**
```json
{
  "config": {
    "clients": 50,
    "duration": 1,
    "rate": 10,
    "mix": 0.5,
    "dryRun": true
  },
  "summary": {
    "totalSent": 9,
    "totalAccepted": 9,
    "totalRejected": 0,
    "totalErrors": 0,
    "throughput": 2.9022895840051595,
    "latency": {
      "avg": 23.88,
      "p50": 25.67,
      "p95": 40.57,
      "p99": 40.57
    }
  },
  "timestamp": "2026-02-13T18:44:34.224Z"
}
```
