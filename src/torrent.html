<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>bitvid | Local Torrent Client</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Open Graph Meta Tags (optional) -->
    <meta property="og:title" content="bitvid | Local Torrent Client" />
    <meta
      property="og:description"
      content="Download and Seed Torrents Seamlessly"
    />
    <meta
      property="og:image"
      content="https://bitvid.netlify.app/assets/jpg/bitvid.jpg"
    />
    <meta property="og:url" content="https://bitvid.network" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />

    <!-- App Icons -->
    <link rel="icon" href="assets/favicon.ico" sizes="any" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/png/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="assets/png/favicon-16x16.png"
    />
    <link rel="manifest" href="site.webmanifest" />
    <meta name="theme-color" content="#0f172a" />

    <!-- Styles (Tailwind + your own CSS) -->
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/torrent-style.css" />
  </head>

  <body class="bg-gray-100">
    <!-- Main container to mirror the style of index.html -->
    <div
      id="app"
      class="container mx-auto px-4 py-8 min-h-screen flex flex-col"
    >
      <!-- Header -->
      <header class="mb-8">
        <div class="flex items-start">
          <!-- Logo links back to index.html (or "/") -->
          <a href="index.html">
            <img
              src="assets/svg/bitvid-logo-light-mode.svg"
              alt="BitVid Logo"
              class="h-16"
            />
          </a>
        </div>
      </header>

      <!-- Torrent Download Section -->
      <div class="bg-white p-6 rounded-lg shadow-md mb-8">
        <h2 class="text-xl font-semibold mb-4">Download a Torrent</h2>
        <div class="flex items-center space-x-3 mb-4">
          <input
            type="text"
            id="magnetInput"
            placeholder="Enter magnet URI"
            class="w-full border border-gray-300 rounded px-2 py-2 focus:outline-none focus:ring focus:ring-blue-500"
          />
          <button
            id="downloadBtn"
            class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            Download
          </button>
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >Or select a torrent file</label
          >
          <input
            type="file"
            id="torrentFile"
            accept=".torrent"
            class="border border-gray-300 rounded px-2 py-1 focus:outline-none"
          />
        </div>
      </div>

      <!-- Torrent Seeding Section -->
      <div class="bg-white p-6 rounded-lg shadow-md mb-8">
        <h2 class="text-xl font-semibold mb-4">Seed Files</h2>
        <input
          type="file"
          id="seedingArea"
          multiple
          class="border border-gray-300 rounded px-2 py-1 focus:outline-none mb-4"
        />
        <button
          id="seedBtn"
          class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500"
        >
          Start Seeding
        </button>
      </div>

      <!-- Torrent Queue Section -->
      <div
        id="torrentQueue"
        class="torrent-queue-container hidden bg-white rounded-lg shadow-md p-6 flex-grow flex flex-col"
      >
        <div class="torrent-queue-header flex items-center justify-between mb-4">
          <h2 class="text-xl font-semibold">Active Torrents</h2>
        </div>
        <div class="overflow-auto grow">
          <table class="torrent-queue-table w-full" id="torrentQueueTable">
            <thead>
              <tr>
                <th>Name</th>
                <th>Progress</th>
                <th>Size</th>
                <th>↓ Speed</th>
                <th>↑ Speed</th>
                <th>Peers</th>
                <th>ETA</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="torrentQueueBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Selected Torrent Details Panel -->
      <div
        id="selectedTorrentPanel"
        class="bg-white p-6 rounded-lg shadow-md mt-8 hidden"
      >
        <!-- Name & Controls -->
        <h5
          id="selectedTorrentName"
          class="text-lg font-bold mb-2 flex items-center space-x-2"
        >
          <!-- Title goes here -->
        </h5>
        <div class="flex items-center space-x-4 mb-4">
          <button
            id="pauseResumeBtn"
            class="bg-blue-500 text-white px-4 py-1 rounded hover:bg-blue-600 focus:outline-none"
          >
            Pause
          </button>
          <button
            id="removeBtn"
            class="bg-red-500 text-white px-4 py-1 rounded hover:bg-red-600 focus:outline-none"
          >
            Remove
          </button>
        </div>

        <!-- Share Section -->
        <h6 class="font-semibold mb-1">Share</h6>
        <ul class="list-disc list-inside text-sm mb-4" id="shareList"></ul>

        <!-- Files List -->
        <h5 class="text-md font-semibold mb-2">Files</h5>
        <table class="min-w-full text-sm" id="selectedTorrentFilesTable">
          <thead class="bg-gray-100">
            <tr>
              <th class="px-3 py-2 text-gray-700">Name</th>
              <th class="px-3 py-2 text-gray-700">Size</th>
              <th class="px-3 py-2 text-gray-700">Priority</th>
            </tr>
          </thead>
          <tbody id="selectedTorrentFilesBody"></tbody>
        </table>
      </div>

      <!-- Client Stats Bar -->
      <div
        id="clientStatsBar"
        class="text-center text-sm text-gray-600 mt-8 hidden"
      >
        <strong>
          Client Stats:
          <span id="clientDlSpeed">↓ 0 kB/s</span> ·
          <span id="clientUlSpeed">↑ 0 kB/s</span> ·
          Ratio: <span id="clientRatio">0.00</span>
        </strong>
      </div>

      <!-- Footer -->
      <footer class="mt-auto pb-8 text-center px-4">
        <a
          href="http://bitvid.network/"
          class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
          target="_blank"
          rel="noopener noreferrer"
        >
          bitvid.network
        </a>
        |
        <a
          href="https://bitvid.btc.us"
          class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
          target="_blank"
          rel="noopener noreferrer"
        >
          bitvid.btc.us
        </a>
        |
        <a
          href="https://bitvid.eth.limo"
          class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
          target="_blank"
          rel="noopener noreferrer"
        >
          bitvid.eth.limo
        </a>
        |
        <div class="mt-2 space-x-4">
          <a
            href="https://github.com/PR0M3TH3AN/bitvid"
            class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
            target="_blank"
            rel="noopener noreferrer"
          >
            GitHub
          </a>
          <a
            href="https://primal.net/p/npub13yarr7j6vjqjjkahd63dmr27curypehx45ucue286ac7sft27y0srnpmpe"
            class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
            target="_blank"
            rel="noopener noreferrer"
          >
            Nostr
          </a>
          <a
            href="https://habla.news/p/nprofile1qyv8wumn8ghj7un9d3shjtnndehhyapwwdhkx6tpdsq3gamnwvaz7tmjv4kxz7fwv3sk6atn9e5k7qgdwaehxw309ahx7uewd3hkcqgswaehxw309ahx7um5wgh8w6twv5q3yamnwvaz7tm0venxx6rpd9hzuur4vgqzpzf6x8a95eyp99dmwm4zmkx4a3cxgrnwdtfe3ej504m3aqjk4ugldyww3a"
            class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
            target="_blank"
            rel="noopener noreferrer"
          >
            Blog
          </a>
          <a
            href="getting-started.html"
            class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
            target="_self"
            rel="noopener noreferrer"
          >
            Getting Started
          </a>
          <a
            href="about.html"
            class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
            target="_self"
            rel="noopener noreferrer"
          >
            About
          </a>
          <a
            href="roadmap.html"
            class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
            target="_self"
            rel="noopener noreferrer"
          >
            Roadmap
          </a>
          <a
            href="torrent.html"
            class="text-gray-500 hover:text-gray-400 transition-colors duration-200"
            target="_self"
            rel="noopener noreferrer"
          >
            Torrent
          </a>
        </div>
        <p
          class="mt-2 text-xs text-gray-600 font-mono break-all max-w-full overflow-hidden"
        >
          IPNS:
          <a href="ipns.html" class="text-blue-600 underline">
            k51qzi5uqu5dgwr4oejq9rk41aoe9zcupenby6iqecsk5byc7rx48uecd133a1
          </a>
        </p>
      </footer>
    </div>

    <!-- Reference files that actually exist -->
    <!-- 1) Service Worker in the root -->
    <script src="sw.min.js"></script>
    <!-- 2) Local webtorrent.min.js (not “global”) -->
    <script src="js/webtorrent.min.js"></script>
    <!-- 3) Our main torrent app logic -->
    <script type="module" src="js/torrent-app.js"></script>
  </body>
</html>