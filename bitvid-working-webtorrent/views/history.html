<!-- views/history.html -->
<section id="watchHistoryView" class="bv-stack" data-ds="new">
  <div class="bv-stack bv-stack--tight">
    <div
      class="flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between"
    >
      <div>
        <div class="flex items-center gap-2">
          <h2 class="text-xl font-semibold text-text">Watch History</h2>
          <button
            type="button"
            id="historyInfoTrigger"
            class="text-muted hover:text-text focus:outline-none transition-colors"
            aria-label="How is this feed sorted?"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-5 h-5"
              aria-hidden="true"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
          </button>
        </div>
        <p class="text-sm text-muted">
          Review the videos you recently played, grouped by day.
        </p>
      </div>
      <div class="flex flex-wrap gap-2" id="watchHistoryActions">
        <button
          type="button"
          data-history-action="clear-cache"
          class="btn-ghost"
        >
          Clear local history
        </button>
        <button
          type="button"
          data-history-action="refresh"
          class="btn-ghost"
          aria-label="Refresh watch history from relays"
        >
          Refresh
        </button>
      </div>
    </div>

    <div
      id="watchHistoryError"
      class="card hidden p-md text-sm text-critical"
      data-state="critical"
      role="alert"
    ></div>
  </div>

  <div id="watchHistoryLoading">
    <div id="watchHistoryStatus">
      <div class="sidebar-loading-wrapper" role="status" aria-live="polite">
        <div class="sidebar-loading-indicator">
          <span
            class="status-spinner status-spinner--inline"
            aria-hidden="true"
          ></span>
          <span class="sidebar-loading-text"
            >Fetching watch history from relaysâ€¦</span
          >
        </div>
      </div>
    </div>
  </div>

  <div
    id="watchHistoryGrid"
    class="grid-stack hidden"
    data-variant="cards"
    data-orientation="vertical"
  ></div>
  <p id="watchHistoryEmpty" class="hidden py-12 text-center text-muted">
    Your watch history is empty. Watch some videos to populate this list.
  </p>

  <button id="watchHistoryLoadMore" type="button" class="btn-ghost hidden w-full">
    Load more
  </button>

  <div id="watchHistorySentinel" class="hidden h-1 w-full"></div>

  <script type="module" src="js/historyView.js"></script>
</section>
