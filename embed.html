<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bitvid | Embed</title>

    <meta name="description" content="Watch embedded bitvid videos." />
    <meta name="robots" content="noindex,follow" />

    <meta name="theme-color" content="var(--color-page)" />
    <script>
      (() => {
        try {
          const STORAGE_KEY = "bitvid:theme";
          const root = document.documentElement;
          const themeMeta = document.querySelector('meta[name="theme-color"]');
          const fallbackColors = {
            dark: "rgb(15, 23, 42)",
            light: "rgb(248, 250, 252)",
          };
          const prefersDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;
          const storedTheme = window.localStorage.getItem(STORAGE_KEY);
          let resolvedTheme = storedTheme || (prefersDark ? "dark" : "light");

          if (resolvedTheme === "default") {
            resolvedTheme = "dark";
          }

          if (resolvedTheme) {
            root.dataset.theme = resolvedTheme;
          }

          const updateThemeColor = () => {
            if (!themeMeta) {
              return;
            }

            const computedThemeColor =
              (window.getComputedStyle &&
                getComputedStyle(root).getPropertyValue("--color-page").trim()) ||
              "";
            const metaColor =
              computedThemeColor ||
              fallbackColors[resolvedTheme] ||
              fallbackColors[prefersDark ? "dark" : "light"];

            if (metaColor) {
              themeMeta.content = metaColor;
            }
          };

          updateThemeColor();

          if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", updateThemeColor, {
              once: true,
            });
          } else if ("requestAnimationFrame" in window) {
            window.requestAnimationFrame(updateThemeColor);
          }
        } catch (error) {
          /* no-op */
        }
      })();
    </script>

    <link href="css/tailwind.generated.css?v=2024.11.09" rel="stylesheet" />
  </head>
  <body class="h-screen w-screen overflow-hidden bg-transparent text-text" data-ds="new">
    <main
      id="embedRoot"
      class="flex h-full w-full flex-col items-center justify-center"
    >
      <section
        class="relative group flex h-full w-full flex-col items-center justify-center overflow-hidden"
      >
        <video
          id="embedVideo"
          class="h-full w-full object-contain"
          controls
          playsinline
          preload="metadata"
        ></video>

        <!-- Overlay -->
        <div
          id="embedOverlay"
          class="pointer-events-none absolute inset-0 flex flex-col justify-start bg-gradient-to-b from-black/80 via-transparent to-transparent p-4 opacity-0 transition-opacity duration-200 group-hover:opacity-100"
        >
          <div class="pointer-events-auto flex w-full items-center justify-between">
            <a
              id="embedWatchButton"
              href="#"
              target="_blank"
              class="flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1.5 text-xs font-medium text-white transition-colors hover:bg-white/20 backdrop-blur-md"
            >
              <span>Watch on</span>
              <img
                src="assets/svg/bitvid-logo-light-mode.svg"
                alt="BitVid"
                class="h-4 w-auto invert"
              />
            </a>

            <div
              class="flex items-center gap-3 text-xs font-medium text-white drop-shadow-md"
            >
              <span
                id="embedViewCount"
                class="flex items-center gap-1.5"
                title="Views"
              >
                <svg
                  class="h-4 w-4 text-white/80"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                  ></path>
                </svg>
                <span data-view-count-text>--</span>
              </span>
              <span
                id="embedLikeCount"
                class="flex items-center gap-1.5"
                title="Likes"
              >
                <svg
                  class="h-3.5 w-3.5 text-white/80"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"
                  ></path>
                </svg>
                <span data-count>--</span>
              </span>
              <span
                id="embedDislikeCount"
                class="flex items-center gap-1.5"
                title="Dislikes"
              >
                <svg
                  class="h-3.5 w-3.5 text-white/80"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2h-3"
                  ></path>
                </svg>
                <span data-count>--</span>
              </span>
            </div>
          </div>
        </div>

        <p
          id="embedStatus"
          class="pointer-events-none absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-md bg-black/60 px-3 py-1 text-sm text-white/90 backdrop-blur-sm"
          role="status"
          aria-live="polite"
        >
          Loading videoâ€¦
        </p>
      </section>
    </main>

    <script type="module" src="js/nostrToolsBootstrap.js?v=2024.11.09"></script>
    <script type="module" src="js/embed.js?v=2024.11.09"></script>
  </body>
</html>
